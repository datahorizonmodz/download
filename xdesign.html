<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DATZON - Mission Download</title>
    <style>
        /* =========================================
           CSS VARIABLES & RESET
           ========================================= */
        :root {
            --bg-color: #f4f6f8;
            --card-bg: #ffffff;
            --text-color: #333333;
            --heading-color: #111111;
            --border-color: #e0e0e0;
            
            --primary-red: #ff0000;
            --primary-green: #28a745;
            --primary-grey: #b0b0b0;
            --whatsapp-color: #25D366;
            --notice-bg: #d4edda;
            --notice-text: #155724;
            --shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        /* Dark Mode Variables */
        body.dark-mode {
            --bg-color: #121212;
            --card-bg: #1e1e1e;
            --text-color: #e0e0e0;
            --heading-color: #ffffff;
            --border-color: #333333;
            --notice-bg: #1e4d2b;
            --notice-text: #d4edda;
            --shadow: 0 4px 12px rgba(0,0,0,0.5);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            transition: background-color 0.3s, color 0.3s;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }

        /* =========================================
           HEADER
           ========================================= */
        header {
            width: 100%;
            max-width: 480px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 10px 0;
        }

        .brand {
            font-size: 24px;
            font-weight: 800;
            text-decoration: none;
            color: var(--heading-color);
            cursor: pointer;
            letter-spacing: 1px;
        }

        /* Toggle Switch */
        .theme-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 26px;
        }
        .theme-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        input:checked + .slider {
            background-color: var(--primary-green);
        }
        input:checked + .slider:before {
            transform: translateX(24px);
        }

        /* =========================================
           MAIN CARD
           ========================================= */
        .container {
            width: 100%;
            max-width: 480px;
            background-color: var(--card-bg);
            border-radius: 16px;
            padding: 25px;
            box-shadow: var(--shadow);
            text-align: center;
        }

        /* Notice Box */
        .notice-box {
            background-color: var(--notice-bg);
            color: var(--notice-text);
            padding: 15px;
            border-radius: 8px;
            font-size: 13px;
            line-height: 1.5;
            margin-bottom: 25px;
            border-left: 5px solid var(--primary-green);
            text-align: left;
        }
        .notice-box strong {
            display: block;
            margin-bottom: 5px;
            font-size: 14px;
        }

        /* Buttons General */
        .btn {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            padding: 14px;
            margin-bottom: 12px;
            border: none;
            border-radius: 8px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            color: white;
            position: relative;
            overflow: hidden;
            transition: transform 0.1s, opacity 0.3s;
        }
        .btn:active {
            transform: scale(0.98);
        }
        .btn-icon {
            margin-right: 10px;
            width: 20px;
            height: 20px;
            fill: white;
        }

        /* Mission Buttons Colors */
        .btn-mission {
            background-color: var(--primary-red);
        }
        .btn-mission.completed {
            background-color: var(--primary-green) !important;
            cursor: default;
        }
        .btn-mission.loading {
            background-color: #cc0000; /* Darker red when loading */
            cursor: wait;
        }

        /* Progress Bar */
        .progress-container {
            display: flex;
            justify-content: space-between;
            gap: 8px;
            margin: 15px 0 30px 0;
        }
        .progress-bar {
            flex: 1;
            height: 6px;
            background-color: var(--border-color);
            border-radius: 3px;
            transition: background-color 0.5s ease;
        }
        .progress-bar.active {
            background-color: var(--primary-green);
        }

        /* Complete & Download Section */
        .divider {
            height: 1px;
            background-color: var(--border-color);
            margin: 20px 0;
        }

        .btn-complete {
            background-color: var(--primary-grey);
            cursor: not-allowed;
            margin-bottom: 15px;
        }
        .btn-complete.ready {
            background-color: var(--primary-red);
            cursor: pointer;
            animation: pulse 1.5s infinite;
        }
        .btn-complete.verified {
            background-color: var(--primary-green);
            cursor: default;
            animation: none;
        }

        .btn-download {
            background-color: var(--primary-grey);
            cursor: not-allowed;
            font-size: 18px;
            padding: 18px;
        }
        .btn-download.ready {
            background-color: var(--primary-green);
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(40, 167, 69, 0.4);
        }

        /* Spinner Animation */
        .spinner {
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 3px solid #ffffff;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            display: none;
        }
        .loading .spinner {
            display: block;
        }
        .loading span {
            display: none; /* Hide text when loading */
        }
        .loading .btn-icon {
            display: none; /* Hide icon when loading */
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(255, 0, 0, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(255, 0, 0, 0); }
            100% { box-shadow: 0 0 0 0 rgba(255, 0, 0, 0); }
        }

    </style>
</head>
<body>

    <header>
        <a href="https://youtube.com/@informatifdata?si=qIyJ7lgDBDOCFmOt" target="_blank" class="brand">DATZON</a>
        <label class="theme-switch">
            <input type="checkbox" id="theme-toggle">
            <span class="slider"></span>
        </label>
    </header>

    <div class="container">
        
        <div class="notice-box">
            <strong>NOTICE / PERINGATAN</strong>
            Saat mengklik tombol download akan diarahkan ke iklan. Jika muncul iklan atau halaman lain, klik kembali lalu klik tombol download lagi.
        </div>

        <button id="btn-m1" class="btn btn-mission" onclick="startMission(1, 'https://youtu.be/to-dirdvj20?si=hrBd_LFrY512Ejwu')">
            <svg class="btn-icon" viewBox="0 0 24 24"><path d="M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"/></svg>
            <span>Like Video YouTube</span>
            <div class="spinner"></div>
        </button>

        <button id="btn-m2" class="btn btn-mission" onclick="startMission(2, 'https://youtube.com/@informatifdata?si=qIyJ7lgDBDOCFmOt')">
            <svg class="btn-icon" viewBox="0 0 24 24"><path d="M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"/></svg>
            <span>Subscribe Channel YouTube</span>
            <div class="spinner"></div>
        </button>

        <button id="btn-m3" class="btn btn-mission" onclick="startMission(3, 'https://whatsapp.com/channel/0029VaLWvFyKWEKjhLtp0H3j')">
            <svg class="btn-icon" viewBox="0 0 24 24"><path d="M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.893 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.884-.001 2.225.651 3.891 1.746 5.634l-.999 3.648 3.742-.981zm11.387-5.464c-.074-.124-.272-.198-.57-.347-.297-.149-1.758-.868-2.031-.967-.272-.099-.47-.149-.669.149-.198.297-.768.967-.941 1.165-.173.198-.347.223-.644.074-.297-.149-1.255-.462-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.297-.347.446-.521.151-.172.2-.296.3-.495.099-.198.05-.372-.025-.521-.075-.148-.669-1.611-.916-2.206-.242-.579-.487-.501-.669-.51l-.57-.01c-.198 0-.52.074-.792.372s-1.04 1.016-1.04 2.479 1.065 2.876 1.213 3.074c.149.198 2.095 3.2 5.076 4.487.709.306 1.263.489 1.694.626.712.226 1.36.194 1.872.118.571-.085 1.758-.719 2.006-1.413.248-.695.248-1.29.173-1.414z"/></svg>
            <span>Join Saluran WhatsApp</span>
            <div class="spinner"></div>
        </button>

        <div class="progress-container">
            <div id="bar-1" class="progress-bar"></div>
            <div id="bar-2" class="progress-bar"></div>
            <div id="bar-3" class="progress-bar"></div>
        </div>

        <div class="divider"></div>

        <button id="btn-complete" class="btn btn-complete" onclick="startComplete()" disabled>
            <span>COMPLETE</span>
            <div class="spinner"></div>
        </button>

        <button id="btn-download" class="btn btn-download" onclick="startDownload()" disabled>
            <svg class="btn-icon" viewBox="0 0 24 24"><path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/></svg>
            <span>DOWNLOAD</span>
        </button>

    </div>

    <script>
        // =========================================
        // CONFIGURATION
        // =========================================
        const ADS_URL = "https://www.effectivegatecpm.com/z55w4h3qx2?key=b3e81a33d4a9ac5be6d499f5f1bd6274"; // Ganti dengan link iklan/safe link Anda
        const DOWNLOAD_URL = "https://sfl.gl/9UEYtw"; // Ganti dengan link download asli
        const MISSION_DURATION = 10000; // 10 Detik
        const VERIFY_DURATION = 3000;   // 3 Detik

        // =========================================
        // STATE MANAGEMENT
        // =========================================
        let state = {
            m1: false,
            m2: false,
            m3: false,
            verified: false
        };

        // =========================================
        // DOM ELEMENTS
        // =========================================
        const themeToggle = document.getElementById('theme-toggle');
        const body = document.body;
        const btnComplete = document.getElementById('btn-complete');
        const btnDownload = document.getElementById('btn-download');

        // =========================================
        // THEME TOGGLE LOGIC
        // =========================================
        themeToggle.addEventListener('change', () => {
            if (themeToggle.checked) {
                body.classList.add('dark-mode');
            } else {
                body.classList.remove('dark-mode');
            }
        });

        // =========================================
        // MISSION LOGIC
        // =========================================
        function startMission(id, url) {
            // Jika sudah selesai, abaikan klik
            if (state['m' + id]) return;

            const btn = document.getElementById(`btn-m${id}`);
            const bar = document.getElementById(`bar-${id}`);

            // Buka link di tab baru
            window.open(url, '_blank');

            // Ubah UI ke Loading
            btn.classList.add('loading');
            btn.disabled = true;

            // Countdown Timer (Tanpa Angka, hanya spinner)
            setTimeout(() => {
                // Selesai Loading
                btn.classList.remove('loading');
                btn.classList.add('completed');
                
                // Ubah Teks & Icon
                btn.innerHTML = `<svg class="btn-icon" viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg> <span>COMPLETE</span>`;
                
                // Update Progress Bar
                bar.classList.add('active');

                // Update State
                state['m' + id] = true;

                // Cek apakah semua misi selesai
                checkAllMissions();
            }, MISSION_DURATION);
        }

        function checkAllMissions() {
            if (state.m1 && state.m2 && state.m3) {
                btnComplete.disabled = false;
                btnComplete.classList.remove('btn-complete'); // Hapus style abu
                btnComplete.classList.add('btn-complete'); // Reset base class
                btnComplete.classList.add('ready'); // Tambah warna merah
            }
        }

        // =========================================
        // COMPLETE / VERIFICATION LOGIC
        // =========================================
        function startComplete() {
            if (!state.m1 || !state.m2 || !state.m3) return; // Security check
            if (state.verified) return;

            // Buka Link Iklan
            window.open(ADS_URL, '_blank');

            // UI Loading
            btnComplete.classList.remove('ready'); // Hilangkan animasi pulse
            btnComplete.classList.add('loading');
            
            setTimeout(() => {
                btnComplete.classList.remove('loading');
                btnComplete.classList.add('verified');
                btnComplete.innerHTML = `<svg class="btn-icon" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg> <span>VERIFIED</span>`;
                
                state.verified = true;
                enableDownload();
            }, VERIFY_DURATION);
        }

        // =========================================
        // DOWNLOAD LOGIC
        // =========================================
        function enableDownload() {
            btnDownload.disabled = false;
            btnDownload.classList.add('ready');
            btnDownload.querySelector('span').innerText = "DOWNLOAD NOW";
        }

        function startDownload() {
            if (state.verified) {
                window.location.href = DOWNLOAD_URL;
            } else {
                alert("Selesaikan misi dan verifikasi terlebih dahulu!");
            }
        }

    </script>
</body>
</html>

